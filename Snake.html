<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Snake</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css?family=Press+Start+2P&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style-j.css">
</head>
<body>
  <div id="bg-pixels"></div>
  <h1 class="retro-title">Snake</h1>
  <!-- Main Menu -->
  <div class="menu glass-card" id="mainMenu">
    <button class="retro-btn" id="playBtn">Play</button>
    <button class="retro-btn" id="customizeBtn">Customize</button>
    <div id="highscorePanel">
      <h2 class="highscore-title">Highscores</h2>
      <table id="scoreboardTable" class="scoreboard-table">
        <thead>
          <tr>
            <th>Rank</th>
            <th>Player</th>
            <th>Score</th>
          </tr>
        </thead>
        <tbody id="scoreboardTableBody"></tbody>
      </table>
    </div>
  </div>

  <!-- Customize Menu -->
  <div class="customize-menu glass-card" id="customizeMenu" style="display:none;">
    <h2 class="customize-title">Customize</h2>
    <div>
      <label class="customize-section-title">Snake Body Color:</label>
      <div class="color-options">
        <button class="color-btn" style="background:#3ca6a6" data-color="#3ca6a6"></button>
        <button class="color-btn" style="background:#e94f37" data-color="#e94f37"></button>
        <button class="color-btn" style="background:#f6d55c" data-color="#f6d55c"></button>
        <button class="color-btn" style="background:#20639b" data-color="#20639b"></button>
        <button class="color-btn" style="background:#6bffb1" data-color="#6bffb1"></button>
        <input type="color" id="colorPicker" value="#3ca6a6">
      </div>
    </div>
    <div style="margin-top:16px;">
      <label class="customize-section-title">Snake Head Color:</label>
      <input type="color" id="headColorPicker" value="#f6d55c">
    </div>
    <div style="margin-top:16px;">
      <label class="customize-section-title">Scale Color:</label>
      <input type="color" id="scaleColorPicker" value="#aaffee">
    </div>
    <button class="retro-btn" id="customizeBackBtn">Back</button>
  </div>

  <!-- Gameplay UI -->
  <div class="gameplay-ui glass-game">
    <canvas id="gameCanvas" width="480" height="480" style="display:none;"></canvas>
    <div id="score" class="neon-score" style="display:none;">Score: 0</div>
    <div class="hud-buttons">
      <button class="retro-btn" id="restartBtn" style="display:none;">Restart</button>
      <button class="retro-btn danger" id="backBtn" style="display:none;">Back</button>
    </div>
    <!-- On-Screen Controls -->
    <div id="mobile-controls" style="display:none;">
      <div class="mobile-row">
        <button class="mobile-btn" id="btnUp">&#8593;</button>
      </div>
      <div class="mobile-row">
        <button class="mobile-btn" id="btnLeft">&#8592;</button>
        <button class="mobile-btn" id="btnDown">&#8595;</button>
        <button class="mobile-btn" id="btnRight">&#8594;</button>
      </div>
    </div>
    <!-- Background music -->
    <audio id="bgMusic" src="background-music.mp3" loop preload="auto" style="display:none"></audio>
    <!-- Eat sound effect -->
    <audio id="eatSound" src="eat-sound.mp3" preload="auto" style="display:none"></audio>
  </div>

  <!-- Name Entry Modal -->
  <div id="nameModal" class="modal-overlay" style="display:none;">
    <div class="modal-content">
      <label for="playerName" class="input-label">Enter your name:</label>
      <input id="playerName" maxlength="16" autocomplete="off" class="name-input" placeholder="Player Name">
      <div id="nameError" class="input-error"></div>
      <button class="retro-btn" id="nameDoneBtn">Done</button>
    </div>
  </div>

  <footer class="footer-retro">
    <span>Retro Snake &copy; 2025</span>
  </footer>
  <script>
    // Background music controls
    const bgMusic = document.getElementById('bgMusic');
    function playMusic() {
      if (bgMusic) {
        bgMusic.volume = 0.3;
        bgMusic.currentTime = 0;
        bgMusic.play();
      }
    }
    function pauseMusic() {
      if (bgMusic) {
        bgMusic.pause();
        bgMusic.currentTime = 0;
      }
    }

    // Example Play/Restart/Back button hooks
    document.getElementById('playBtn').addEventListener('click', function () {
      playMusic();
      // Add your game start logic here...
    });
    document.getElementById('restartBtn').addEventListener('click', function () {
      playMusic();
      // Add your game restart logic here...
    });
    document.getElementById('backBtn').addEventListener('click', function () {
      pauseMusic();
      // Add your game back-to-menu logic here...
    });

    // If you have a gameOver function, call pauseMusic() there too
    // function gameOver() {
    //   pauseMusic();
    //   // ...other game over logic...
    // }
  </script>
  <script src="script-j.js"></script>
</body>
</html>